<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>Shooting Percentage</title>
  <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65' crossorigin='anonymous'>
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css'>
  <script src='https://d3js.org/d3.v7.min.js'></script>
</head>
<body class='bg-dark'>

<div class='container bg-dark text-white'>
  <div class='row'>
    <div class='col p-5'>
      <h1>Shooting percentage</h1>
      <div class='form'>
        <input id='percentageInput' type='number' class='form-control' id='floatingInput' value='50' min='0' max='100' step='0.1' />
      </div>
    </div>
    <div class='col p-5 text-center'>
      <button id='shootButton' type='button' class='btn btn-outline-light' style='--bs-btn-font-size: 2.5rem;'>
        Shoot your shot!
      </button>
      <h3 id='shootingText' style='visibility: hidden;'></h3>
    </div>
  </div>
  <div id='shotHistory' class='row' style='visibility: hidden;'>
    Shot history:
    <div id='shots'></div>
  </div> 
</div>

<script>
  let shooting = false;
  let percentage = d3.select('#percentageInput').node().value;

  console.log(percentage)

  d3.select('#percentageInput').on('change', evt => {
    percentage = evt.target.value;
  });

  d3.select('#shootButton').on('click', () => {
    const text = d3.select('#shootingText')
      .style('visibility', 'visible')
      .text('The ball is up...');

    setTimeout(() => {
      const success = Math.random() < percentage / 100;

      d3.select('#shotHistory')
        .style('visibility', 'visible');

      text.text(success ? `It's good!` : 'No good!')
    }, 1000);
  });
</script>

</body>
</html>
